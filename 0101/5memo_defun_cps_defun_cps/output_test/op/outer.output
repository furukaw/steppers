Step 0:  ((fun a -> a) (with (handler {return x -> x, A(x; k) -> (k x)}) handle ((fun b -> b) (with (handler {return x -> x, B(x; k) -> x}) handle ((fun c -> c) (A ((fun d -> d) (fun e -> e))))))))
Step 1:  ((fun a -> a) (with (handler {return x -> x, A(x; k) -> (k x)}) handle ((fun b -> b) (with (handler {return x -> x, B(x; k) -> x}) handle ((fun c -> c) (A (fun e -> e)))))))
Step 1:  ((fun a -> a) (with (handler {return x -> x, A(x; k) -> (k x)}) handle ((fun b -> b) (with (handler {return x -> x, B(x; k) -> x}) handle ((fun c -> c) (A (fun e -> e)))))))
Step 2:  ((fun a -> a) ((fun y => (with (handler {return x -> x, A(x; k) -> (k x)}) handle ((fun b -> b) (with (handler {return x -> x, B(x; k) -> x}) handle ((fun c -> c) y))))) (fun e -> e)))
Step 2:  ((fun a -> a) ((fun y => (with (handler {return x -> x, A(x; k) -> (k x)}) handle ((fun b -> b) (with (handler {return x -> x, B(x; k) -> x}) handle ((fun c -> c) y))))) (fun e -> e)))
Step 3:  ((fun a -> a) (with (handler {return x -> x, A(x; k) -> (k x)}) handle ((fun b -> b) (with (handler {return x -> x, B(x; k) -> x}) handle ((fun c -> c) (fun e -> e))))))
Step 3:  ((fun a -> a) (with (handler {return x -> x, A(x; k) -> (k x)}) handle ((fun b -> b) (with (handler {return x -> x, B(x; k) -> x}) handle ((fun c -> c) (fun e -> e))))))
Step 4:  ((fun a -> a) (with (handler {return x -> x, A(x; k) -> (k x)}) handle ((fun b -> b) (with (handler {return x -> x, B(x; k) -> x}) handle (fun e -> e)))))
Step 4:  ((fun a -> a) (with (handler {return x -> x, A(x; k) -> (k x)}) handle ((fun b -> b) (with (handler {return x -> x, B(x; k) -> x}) handle (fun e -> e)))))
Step 5:  ((fun a -> a) (with (handler {return x -> x, A(x; k) -> (k x)}) handle ((fun b -> b) (fun e -> e))))
Step 5:  ((fun a -> a) (with (handler {return x -> x, A(x; k) -> (k x)}) handle ((fun b -> b) (fun e -> e))))
Step 6:  ((fun a -> a) (with (handler {return x -> x, A(x; k) -> (k x)}) handle (fun e -> e)))
Step 6:  ((fun a -> a) (with (handler {return x -> x, A(x; k) -> (k x)}) handle (fun e -> e)))
Step 7:  ((fun a -> a) (fun e -> e))
Step 7:  ((fun a -> a) (fun e -> e))
Step 8:  (fun e -> e)
Result:  (fun e -> e)
